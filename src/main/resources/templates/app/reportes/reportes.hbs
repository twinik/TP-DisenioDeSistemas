{{#partial "contenido"}}
    <div class="p-10 mx-auto max-w-4xl">
        <h1 class="title1">Reportes</h1>
        <table class="w-full mt-10 table-auto">
            <tr>
                <th class="p-2 azulIntermedio text-white">Fecha</th>
                <th class="p-2 azulIntermedio text-white">
                    Fallas por Heladera
                </th>
                <th class="p-2 azulIntermedio text-white">
                    Viandas retiradas/colocadas por Heladera
                </th>
                <th class="p-2 azulIntermedio text-white">
                    Viandas por Colaborador
                </th>
            </tr>
            {{#each reportes}}
                <tr class="border-b">
                    <td class="p-3 border-x">{{this.fecha}}</td>
                    <td class="p-3 border-x cursor-pointer">
                        <div class="flex justify-center" onclick="descargarArchivo({{this.archivoFallas}})">
                            <span>Descargar reporte</span>
                            <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    enable-background="new 0 0 24 24"
                                    height="24"
                                    viewBox="0 0 24 24"
                                    width="24"
                            >
                                <g>
                                    <rect
                                            fill="none"
                                            height="24"
                                            width="24"
                                    />
                                </g>
                                <g>
                                    <path
                                            d="M5,20h14v-2H5V20z M19,9h-4V3H9v6H5l7,7L19,9z"
                                    />
                                </g>
                            </svg>
                        </div>
                    </td>
                    <td class="p-3 border-x cursor-pointer">
                        <div class="flex justify-center" onclick="descargarArchivo({{this.archivoViandasHeladera}})">
                            <span>Descargar reporte</span>
                            <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    enable-background="new 0 0 24 24"
                                    height="24"
                                    viewBox="0 0 24 24"
                                    width="24"
                            >
                                <g>
                                    <rect
                                            fill="none"
                                            height="24"
                                            width="24"
                                    />
                                </g>
                                <g>
                                    <path
                                            d="M5,20h14v-2H5V20z M19,9h-4V3H9v6H5l7,7L19,9z"
                                    />
                                </g>
                            </svg>
                        </div>
                    </td>
                    <td class="p-3 border-x cursor-pointer" onclick="descargarArchivo({{this.archivoViandasColaborador}})">
                        <div class="flex justify-center">
                            <span>Descargar reporte</span>
                            <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    enable-background="new 0 0 24 24"
                                    height="24"
                                    viewBox="0 0 24 24"
                                    width="24"
                            >
                                <g>
                                    <rect
                                            fill="none"
                                            height="24"
                                            width="24"
                                    />
                                </g>
                                <g>
                                    <path
                                            d="M5,20h14v-2H5V20z M19,9h-4V3H9v6H5l7,7L19,9z"
                                    />
                                </g>
                            </svg>
                        </div>
                    </td>
                </tr>
            {{/each}}
            <tr class="border-b">
                <td class="p-3 border-x">09/12/2018</td>
                <td class="p-3 border-x cursor-pointer">
                    <div class="flex justify-center">
                        <span>Descargar reporte</span>
                        <svg
                                xmlns="http://www.w3.org/2000/svg"
                                enable-background="new 0 0 24 24"
                                height="24"
                                viewBox="0 0 24 24"
                                width="24"
                        >
                            <g>
                                <rect
                                        fill="none"
                                        height="24"
                                        width="24"
                                />
                            </g>
                            <g>
                                <path
                                        d="M5,20h14v-2H5V20z M19,9h-4V3H9v6H5l7,7L19,9z"
                                />
                            </g>
                        </svg>
                    </div>
                </td>
                <td class="p-3 border-x cursor-pointer">
                    <div class="flex justify-center">
                        <span>Descargar reporte</span>
                        <svg
                                xmlns="http://www.w3.org/2000/svg"
                                enable-background="new 0 0 24 24"
                                height="24"
                                viewBox="0 0 24 24"
                                width="24"
                        >
                            <g>
                                <rect
                                        fill="none"
                                        height="24"
                                        width="24"
                                />
                            </g>
                            <g>
                                <path
                                        d="M5,20h14v-2H5V20z M19,9h-4V3H9v6H5l7,7L19,9z"
                                />
                            </g>
                        </svg>
                    </div>
                </td>
                <td class="p-3 border-x cursor-pointer">
                    <div class="flex justify-center">
                        <span>Descargar reporte</span>
                        <svg
                                xmlns="http://www.w3.org/2000/svg"
                                enable-background="new 0 0 24 24"
                                height="24"
                                viewBox="0 0 24 24"
                                width="24"
                        >
                            <g>
                                <rect
                                        fill="none"
                                        height="24"
                                        width="24"
                                />
                            </g>
                            <g>
                                <path
                                        d="M5,20h14v-2H5V20z M19,9h-4V3H9v6H5l7,7L19,9z"
                                />
                            </g>
                        </svg>
                    </div>
                </td>
            </tr>
            <tr class="border-b">
                <td class="p-3 border-x">09/12/2018</td>
                <td class="p-3 border-x cursor-pointer">
                    <div class="flex justify-center">
                        <span>Descargar reporte</span>
                        <svg
                                xmlns="http://www.w3.org/2000/svg"
                                enable-background="new 0 0 24 24"
                                height="24"
                                viewBox="0 0 24 24"
                                width="24"
                        >
                            <g>
                                <rect
                                        fill="none"
                                        height="24"
                                        width="24"
                                />
                            </g>
                            <g>
                                <path
                                        d="M5,20h14v-2H5V20z M19,9h-4V3H9v6H5l7,7L19,9z"
                                />
                            </g>
                        </svg>
                    </div>
                </td>
                <td class="p-3 border-x cursor-pointer">
                    <div class="flex justify-center">
                        <span>Descargar reporte</span>
                        <svg
                                xmlns="http://www.w3.org/2000/svg"
                                enable-background="new 0 0 24 24"
                                height="24"
                                viewBox="0 0 24 24"
                                width="24"
                        >
                            <g>
                                <rect
                                        fill="none"
                                        height="24"
                                        width="24"
                                />
                            </g>
                            <g>
                                <path
                                        d="M5,20h14v-2H5V20z M19,9h-4V3H9v6H5l7,7L19,9z"
                                />
                            </g>
                        </svg>
                    </div>
                </td>
                <td class="p-3 border-x cursor-pointer">
                    <div class="flex justify-center">
                        <span>Descargar reporte</span>
                        <svg
                                xmlns="http://www.w3.org/2000/svg"
                                enable-background="new 0 0 24 24"
                                height="24"
                                viewBox="0 0 24 24"
                                width="24"
                        >
                            <g>
                                <rect
                                        fill="none"
                                        height="24"
                                        width="24"
                                />
                            </g>
                            <g>
                                <path
                                        d="M5,20h14v-2H5V20z M19,9h-4V3H9v6H5l7,7L19,9z"
                                />
                            </g>
                        </svg>
                    </div>
                </td>
            </tr>
            <tr class="border-b">
                <td class="p-3 border-x">09/12/2018</td>
                <td class="p-3 border-x cursor-pointer">
                    <div class="flex justify-center">
                        <span>Descargar reporte</span>
                        <svg
                                xmlns="http://www.w3.org/2000/svg"
                                enable-background="new 0 0 24 24"
                                height="24"
                                viewBox="0 0 24 24"
                                width="24"
                        >
                            <g>
                                <rect
                                        fill="none"
                                        height="24"
                                        width="24"
                                />
                            </g>
                            <g>
                                <path
                                        d="M5,20h14v-2H5V20z M19,9h-4V3H9v6H5l7,7L19,9z"
                                />
                            </g>
                        </svg>
                    </div>
                </td>
                <td class="p-3 border-x cursor-pointer">
                    <div class="flex justify-center">
                        <span>Descargar reporte</span>
                        <svg
                                xmlns="http://www.w3.org/2000/svg"
                                enable-background="new 0 0 24 24"
                                height="24"
                                viewBox="0 0 24 24"
                                width="24"
                        >
                            <g>
                                <rect
                                        fill="none"
                                        height="24"
                                        width="24"
                                />
                            </g>
                            <g>
                                <path
                                        d="M5,20h14v-2H5V20z M19,9h-4V3H9v6H5l7,7L19,9z"
                                />
                            </g>
                        </svg>
                    </div>
                </td>
                <td class="p-3 border-x cursor-pointer">
                    <div class="flex justify-center">
                        <span>Descargar reporte</span>
                        <svg
                                xmlns="http://www.w3.org/2000/svg"
                                enable-background="new 0 0 24 24"
                                height="24"
                                viewBox="0 0 24 24"
                                width="24"
                        >
                            <g>
                                <rect
                                        fill="none"
                                        height="24"
                                        width="24"
                                />
                            </g>
                            <g>
                                <path
                                        d="M5,20h14v-2H5V20z M19,9h-4V3H9v6H5l7,7L19,9z"
                                />
                            </g>
                        </svg>
                    </div>
                </td>
            </tr>
            <tr class="border-b">
                <td class="p-3 border-x">09/12/2018</td>
                <td class="p-3 border-x cursor-pointer">
                    <div class="flex justify-center">
                        <span>Descargar reporte</span>
                        <svg
                                xmlns="http://www.w3.org/2000/svg"
                                enable-background="new 0 0 24 24"
                                height="24"
                                viewBox="0 0 24 24"
                                width="24"
                        >
                            <g>
                                <rect
                                        fill="none"
                                        height="24"
                                        width="24"
                                />
                            </g>
                            <g>
                                <path
                                        d="M5,20h14v-2H5V20z M19,9h-4V3H9v6H5l7,7L19,9z"
                                />
                            </g>
                        </svg>
                    </div>
                </td>
                <td class="p-3 border-x cursor-pointer">
                    <div class="flex justify-center">
                        <span>Descargar reporte</span>
                        <svg
                                xmlns="http://www.w3.org/2000/svg"
                                enable-background="new 0 0 24 24"
                                height="24"
                                viewBox="0 0 24 24"
                                width="24"
                        >
                            <g>
                                <rect
                                        fill="none"
                                        height="24"
                                        width="24"
                                />
                            </g>
                            <g>
                                <path
                                        d="M5,20h14v-2H5V20z M19,9h-4V3H9v6H5l7,7L19,9z"
                                />
                            </g>
                        </svg>
                    </div>
                </td>
                <td class="p-3 border-x cursor-pointer">
                    <div class="flex justify-center">
                        <span>Descargar reporte</span>
                        <svg
                                xmlns="http://www.w3.org/2000/svg"
                                enable-background="new 0 0 24 24"
                                height="24"
                                viewBox="0 0 24 24"
                                width="24"
                        >
                            <g>
                                <rect
                                        fill="none"
                                        height="24"
                                        width="24"
                                />
                            </g>
                            <g>
                                <path
                                        d="M5,20h14v-2H5V20z M19,9h-4V3H9v6H5l7,7L19,9z"
                                />
                            </g>
                        </svg>
                    </div>
                </td>
            </tr>
        </table>
    </div>
{{/partial}}

{{#partial "scripts"}}
    <script>
        function descargarArchivo(fileName) {
            fetch(`/download-reporte?file=${encodeURIComponent(fileName)}`)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('File download failed');
                        }
                        return response.blob();  // Get the file as a Blob
                    })
                    .then(blob => {
                        const url = window.URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = fileName;  // Set the filename for the download
                        document.body.appendChild(a);
                        a.click();  // Programmatically trigger the download
                        a.remove();  // Remove the element after the download
                    })
                    .catch(error => {
                        console.error('Error downloading file:', error);
                    });
        }
    </script>
{{/partial}}

{{> templates/app/base}}